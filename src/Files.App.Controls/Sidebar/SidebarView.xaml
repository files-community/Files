<!--  Copyright (c) Files Community. Licensed under the MIT License.  -->
<ResourceDictionary
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:local="using:Files.App.Controls">

	<x:Double x:Key="SidebarViewPaneMaxWidth">480</x:Double>
	<x:Double x:Key="SidebarViewSizerWidth">4</x:Double>
	<Thickness x:Key="SidebarSizerMargin">0,60,0,40</Thickness>
	<CornerRadius x:Key="SidebarSizerConerRadius">2</CornerRadius>
	<Thickness x:Key="SidebarContentMargin">2,0,0,0</Thickness>
	<Thickness x:Key="SidebarMenuItemsRepeaterMargin">4,8,4,16</Thickness>

	<Style BasedOn="{StaticResource DefaultSidebarViewStyle}" TargetType="local:SidebarView" />

	<Style x:Key="DefaultSidebarViewStyle" TargetType="local:SidebarView">
		<!--  Basic visual settings  -->
		<Setter Property="Background" Value="{ThemeResource SubtleFillColorTransparentBrush}" />
		<Setter Property="BorderBrush" Value="{ThemeResource SubtleFillColorTransparentBrush}" />
		<Setter Property="BorderThickness" Value="0" />
		<Setter Property="CornerRadius" Value="0" />
		<!--  Alignment settings  -->
		<Setter Property="HorizontalAlignment" Value="Stretch" />
		<Setter Property="HorizontalContentAlignment" Value="Stretch" />
		<Setter Property="VerticalAlignment" Value="Stretch" />
		<Setter Property="VerticalContentAlignment" Value="Stretch" />
		<!--  Tab settings  -->
		<Setter Property="IsTabStop" Value="False" />
		<!--  Visual styling  -->
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="local:SidebarView">
					<Grid
						x:Name="PART_RootPanel"
						Background="{TemplateBinding Background}"
						BorderBrush="{TemplateBinding BorderBrush}"
						BorderThickness="{TemplateBinding BorderThickness}"
						CornerRadius="{TemplateBinding CornerRadius}">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto" />
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>

						<!--  Pane Dismiss Layer  -->
						<Border
							x:Name="PART_PaneLightDismissLayer"
							Grid.Column="1"
							HorizontalAlignment="Stretch"
							VerticalAlignment="Stretch"
							Background="Transparent"
							Canvas.ZIndex="10"
							Visibility="Collapsed" />

						<!--  Pane  -->
						<Grid
							x:Name="PART_PanePanel"
							Width="{Binding OpenPaneLength, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
							MaxWidth="{StaticResource SidebarViewPaneMaxWidth}"
							XYFocusKeyboardNavigation="Enabled">
							<Grid.RowDefinitions>
								<RowDefinition Height="*" />
								<RowDefinition Height="Auto" />
							</Grid.RowDefinitions>
							<Grid.RenderTransform>
								<CompositeTransform x:Name="PART_PanePanelTransform" />
							</Grid.RenderTransform>

							<!--  Menu Items  -->
							<ItemsRepeaterScrollHost>
								<ScrollViewer HorizontalScrollMode="Disabled" VerticalScrollBarVisibility="Auto">
									<ItemsRepeater
										x:Name="PART_MenuItemsItemsRepeater"
										Margin="{StaticResource SidebarMenuItemsRepeaterMargin}"
										AutomationProperties.AccessibilityView="Content"
										AutomationProperties.Name="Sidebar pane"
										IsTabStop="True"
										ItemTemplate="{StaticResource DefaultSidebarItemTemplate}"
										ItemsSource="{Binding MenuItemsSource, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
										VerticalCacheLength="50" />
								</ScrollViewer>
							</ItemsRepeaterScrollHost>

							<!--  Footer Items  -->
							<ContentPresenter
								x:Name="PART_FooterItemsPresenter"
								Grid.Row="1"
								Content="{Binding Footer, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}" />

						</Grid>

						<!--  Sizer  -->
						<Border
							x:Name="PART_PaneResizer"
							Grid.Column="1"
							Width="{StaticResource SidebarViewSizerWidth}"
							Margin="{StaticResource SidebarSizerMargin}"
							HorizontalAlignment="Left"
							Background="Transparent"
							Canvas.ZIndex="1"
							CornerRadius="{StaticResource SidebarSizerConerRadius}"
							IsTabStop="True"
							ManipulationMode="TranslateX"
							RenderTransform="{TemplateBinding RenderTransform}"
							UseSystemFocusVisuals="True" />

						<!--  Content  -->
						<ContentPresenter
							x:Name="PART_ContentPresenter"
							Grid.Column="1"
							Margin="{StaticResource SidebarContentMargin}"
							Content="{Binding InnerContent, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}"
							TabFocusNavigation="Local" />

						<VisualStateManager.VisualStateGroups>

							<VisualStateGroup x:Name="DisplayModes">
								<VisualState x:Name="Expanded" />
								<VisualState x:Name="Compact">
									<VisualState.Setters>
										<Setter Target="PART_PanePanel.Width" Value="{StaticResource SidebarCompactOpenPaneLength}" />
									</VisualState.Setters>
								</VisualState>
								<VisualState x:Name="MinimalCollapsed">
									<VisualState.Setters>
										<Setter Target="PART_PanePanel.Width" Value="{StaticResource SidebarOpenPaneLength}" />
										<Setter Target="PART_PanePanel.Background" Value="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}" />
										<Setter Target="PART_PanePanel.BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
										<Setter Target="PART_PanePanel.BorderThickness" Value="0,1,1,0" />
										<Setter Target="PART_PanePanel.CornerRadius" Value="0,8,0,8" />
										<Setter Target="PART_ContentPresenter.(Grid.Column)" Value="0" />
										<Setter Target="PART_ContentPresenter.(Grid.ColumnSpan)" Value="3" />
										<Setter Target="PART_PaneResizer.Visibility" Value="Collapsed" />
										<Setter Target="PART_ContentPresenter.Margin" Value="8,0,8,0" />
										<!--  Specific to Collapsed State  -->
										<Setter Target="PART_PanePanelTransform.TranslateX" Value="{StaticResource SidebarNegativeOpenPaneLength}" />
										<Setter Target="PART_PanePanel.Visibility" Value="Collapsed" />
									</VisualState.Setters>
								</VisualState>
								<VisualState x:Name="MinimalExpanded">
									<VisualState.Setters>
										<Setter Target="PART_PanePanel.Width" Value="{StaticResource SidebarOpenPaneLength}" />
										<Setter Target="PART_PanePanel.Background" Value="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}" />
										<Setter Target="PART_PanePanel.BorderBrush" Value="{ThemeResource CardStrokeColorDefaultBrush}" />
										<Setter Target="PART_PanePanel.BorderThickness" Value="0,1,1,0" />
										<Setter Target="PART_PanePanel.CornerRadius" Value="0,8,0,8" />
										<Setter Target="PART_ContentPresenter.(Grid.Column)" Value="0" />
										<Setter Target="PART_ContentPresenter.(Grid.ColumnSpan)" Value="3" />
										<Setter Target="PART_PaneResizer.Visibility" Value="Collapsed" />
										<Setter Target="PART_ContentPresenter.Margin" Value="8,0,8,0" />
										<!--  Specific to Expanded State  -->
										<Setter Target="PaneLightDismissLayer.Visibility" Value="Visible" />
										<Setter Target="PART_PanePanel.Shadow">
											<Setter.Value>
												<ThemeShadow />
											</Setter.Value>
										</Setter>
									</VisualState.Setters>
								</VisualState>
								<VisualStateGroup.Transitions>
									<VisualTransition From="Compact" To="MinimalCollapsed">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="{StaticResource SidebarNegativeCompactOpenPaneLength}" />
											</DoubleAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Column)">
												<DiscreteObjectKeyFrame Value="0" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.ColumnSpan)">
												<DiscreteObjectKeyFrame Value="3" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Margin)">
												<DiscreteObjectKeyFrame Value="0,0,0,0" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="Background">
												<DiscreteObjectKeyFrame Value="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="MaxWidth">
												<DiscreteObjectKeyFrame Value="{StaticResource SidebarCompactOpenPaneLength}" />
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<VisualTransition From="Expanded" To="MinimalCollapsed">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="{Binding NegativeOpenPaneLength, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}" />
											</DoubleAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Column)">
												<DiscreteObjectKeyFrame Value="0" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.ColumnSpan)">
												<DiscreteObjectKeyFrame Value="3" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Margin)">
												<DiscreteObjectKeyFrame Value="0,0,0,0" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="Background">
												<DiscreteObjectKeyFrame Value="{ThemeResource AcrylicBackgroundFillColorDefaultBrush}" />
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<VisualTransition From="MinimalCollapsed" To="Compact">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="{StaticResource SidebarNegativeCompactOpenPaneLength}" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="0" />
											</DoubleAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Column)">
												<DiscreteObjectKeyFrame Value="2" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.ColumnSpan)">
												<DiscreteObjectKeyFrame Value="1" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Margin)">
												<DiscreteObjectKeyFrame Value="2,0,0,0" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="Width">
												<DiscreteObjectKeyFrame Value="{StaticResource SidebarCompactOpenPaneLength}" />
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<VisualTransition From="MinimalCollapsed" To="Expanded">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="{Binding NegativeOpenPaneLength, RelativeSource={RelativeSource TemplatedParent}, Mode=OneWay}" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="0" />
											</DoubleAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Column)">
												<DiscreteObjectKeyFrame Value="2" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.ColumnSpan)">
												<DiscreteObjectKeyFrame Value="1" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_ContentPresenter" Storyboard.TargetProperty="(Grid.Margin)">
												<DiscreteObjectKeyFrame Value="2,0,0,0" />
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<VisualTransition From="MinimalCollapsed" To="MinimalExpanded">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="{StaticResource SidebarNegativeOpenPaneLength}" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="0" />
											</DoubleAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PaneLightDismissLayer" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0" Value="Visible" />
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="Shadow">
												<DiscreteObjectKeyFrame KeyTime="0:0:0">
													<DiscreteObjectKeyFrame.Value>
														<ThemeShadow />
													</DiscreteObjectKeyFrame.Value>
												</DiscreteObjectKeyFrame>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
									<VisualTransition From="MinimalExpanded" To="MinimalCollapsed">
										<Storyboard>
											<DoubleAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanelTransform" Storyboard.TargetProperty="TranslateX">
												<DiscreteDoubleKeyFrame KeyTime="0:0:0" Value="0" />
												<SplineDoubleKeyFrame
													KeySpline="0.1,0.9 0.2,1.0"
													KeyTime="0:0:0.35"
													Value="{StaticResource SidebarNegativeOpenPaneLength}" />
											</DoubleAnimationUsingKeyFrames>

											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PanePanel" Storyboard.TargetProperty="Shadow">
												<DiscreteObjectKeyFrame KeyTime="0:0:0">
													<DiscreteObjectKeyFrame.Value>
														<ThemeShadow />
													</DiscreteObjectKeyFrame.Value>
												</DiscreteObjectKeyFrame>
											</ObjectAnimationUsingKeyFrames>
										</Storyboard>
									</VisualTransition>
								</VisualStateGroup.Transitions>
							</VisualStateGroup>

							<VisualStateGroup x:Name="ResizerStates">
								<VisualState x:Name="ResizerNormal" />
								<VisualState x:Name="ResizerPointerOver">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PaneResizer" Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource CardStrokeColorDefaultSolidBrush}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PaneResizer" Storyboard.TargetProperty="BorderBrush">
											<DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource CardStrokeColorDefaultSolidBrush}" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
								<VisualState x:Name="ResizerPressed">
									<Storyboard>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PaneResizer" Storyboard.TargetProperty="Background">
											<DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SolidBackgroundFillColorSecondaryBrush}" />
										</ObjectAnimationUsingKeyFrames>
										<ObjectAnimationUsingKeyFrames Storyboard.TargetName="PART_PaneResizer" Storyboard.TargetProperty="BorderBrush">
											<DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource SolidBackgroundFillColorSecondaryBrush}" />
										</ObjectAnimationUsingKeyFrames>
									</Storyboard>
								</VisualState>
							</VisualStateGroup>

						</VisualStateManager.VisualStateGroups>
					</Grid>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

</ResourceDictionary>
