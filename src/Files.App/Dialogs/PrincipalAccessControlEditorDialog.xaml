<!--  Copyright (c) 2023 Files Community. Licensed under the MIT License. See the LICENSE.  -->
<ContentDialog
	x:Class="Files.App.Dialogs.PrincipalAccessControlEditorDialog"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:local="using:Files.App.Dialogs"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:wctconverters="using:CommunityToolkit.WinUI.UI.Converters"
	Title="Edit permission"
	DefaultButton="Primary"
	PrimaryButtonText="{helpers:ResourceString Name=Save}"
	RequestedTheme="{x:Bind helpers:ThemeHelper.RootTheme}"
	Style="{StaticResource DefaultContentDialogStyle}"
	mc:Ignorable="d">

	<ContentDialog.Resources>
		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="ms-appx:///ResourceDictionaries/RightAlignedToggleSwitchStyle.xaml" />
			</ResourceDictionary.MergedDictionaries>

			<wctconverters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
			<wctconverters:BoolToObjectConverter
				x:Key="NegateBoolToVisibilityConverter"
				FalseValue="Visible"
				TrueValue="Collapsed" />

		</ResourceDictionary>
	</ContentDialog.Resources>

	<Grid Margin="0,0,0,-24" RowSpacing="24">

		<ScrollViewer
			Grid.Row="1"
			Height="256"
			MinWidth="400"
			VerticalScrollBarVisibility="Hidden">
			<StackPanel Margin="0,0,0,24" Spacing="16">

				<!--  Principal  -->
				<StackPanel Grid.Row="0" Spacing="8">
					<TextBlock
						Foreground="{ThemeResource TextFillColorSecondaryBrush}"
						Style="{StaticResource CaptionTextBlockStyle}"
						Text="Principal:" />
					<TextBlock IsTextSelectionEnabled="True" Style="{StaticResource BodyTextBlockStyle}">
						<Run Text="{x:Bind ModifiableModel.Principal.DisplayName, Mode=OneWay}" />
						<Run Foreground="{ThemeResource TextFillColorSecondaryBrush}" Text="{x:Bind ModifiableModel.Principal.FullNameHumanizedWithBrackes, Mode=OneWay}" />
					</TextBlock>
				</StackPanel>

				<!--  Access Type  -->
				<StackPanel
					x:Name="AccessControlTypePanel"
					Grid.Row="1"
					Spacing="8">
					<TextBlock
						Foreground="{ThemeResource TextFillColorSecondaryBrush}"
						Style="{StaticResource CaptionTextBlockStyle}"
						Text="Access Type:" />
					<ComboBox
						x:Name="AccessControlTypeComboBox"
						MinWidth="256"
						ItemsSource="{x:Bind ModifiableModel.PossibleAccessControlTypes, Mode=OneWay}"
						SelectedItem="{x:Bind ModifiableModel.SelectedAccessControlType, Mode=TwoWay}" />
				</StackPanel>

				<!--  Access Inheritance Applies To  -->
				<StackPanel
					x:Name="AccessInheritanceAppliesToTypePanel"
					Grid.Row="1"
					x:Load="{x:Bind ModifiableModel.IsFolder, Mode=OneWay}"
					Spacing="8">
					<TextBlock
						Foreground="{ThemeResource TextFillColorSecondaryBrush}"
						Style="{StaticResource CaptionTextBlockStyle}"
						Text="Applies to:" />
					<ComboBox
						x:Name="AccessInheritanceAppliesToTypeComboBox"
						MinWidth="256"
						ItemsSource="{x:Bind ModifiableModel.PossibleAccessControlInheritanceAppliesToTypes, Mode=OneWay}"
						SelectedIndex="{x:Bind ModifiableModel.SelectedAccessControlInheritanceAppliesToTypeIndex, Mode=TwoWay}" />
				</StackPanel>

				<!--  Access Controls  -->
				<StackPanel Grid.Row="2" Spacing="8">
					<Grid HorizontalAlignment="Stretch" VerticalAlignment="Top">
						<TextBlock
							HorizontalAlignment="Left"
							VerticalAlignment="Top"
							Foreground="{ThemeResource TextFillColorSecondaryBrush}"
							Style="{StaticResource CaptionTextBlockStyle}"
							Text="Permissions:" />
						<HyperlinkButton
							x:Name="BasicAdvancedToggleSwitch"
							Padding="0"
							HorizontalAlignment="Right"
							VerticalAlignment="Top"
							Command="{x:Bind ModifiableModel.TogglePermissionsVisibilityCommand, Mode=OneWay}"
							Content="{x:Bind ModifiableModel.PermissionsVisibilityToggleLinkButtonContent, Mode=OneWay}" />
					</Grid>
					<Grid>
						<StackPanel
							x:Name="BasicPermissionsPanel"
							VerticalAlignment="Top"
							Orientation="Vertical"
							Visibility="{x:Bind ModifiableModel.ShowAdvancedPermissions, Converter={StaticResource NegateBoolToVisibilityConverter}, Mode=OneWay}">
							<CheckBox Content="Full control" IsChecked="True" />
							<CheckBox Content="Modify" IsChecked="True" />
							<CheckBox Content="Read &amp; Execute" IsChecked="True" />
							<CheckBox Content="Read" IsChecked="True" />
							<CheckBox Content="Write" IsChecked="True" />
							<CheckBox Content="Special permissions" IsEnabled="False" />
						</StackPanel>
						<StackPanel
							x:Name="AdvancedPermissionsPanel"
							VerticalAlignment="Top"
							Orientation="Vertical"
							Visibility="{x:Bind ModifiableModel.ShowAdvancedPermissions, Converter={StaticResource BoolToVisibilityConverter}, Mode=OneWay}">
							<CheckBox Content="Full control" IsChecked="True" />
							<CheckBox Content="Traverse folder / execute file" IsChecked="True" />
							<CheckBox Content="List folder / read data" IsChecked="True" />
							<CheckBox Content="Read attributes" IsChecked="True" />
							<CheckBox Content="Read extended attributes" IsChecked="True" />
							<CheckBox Content="Create files / write data" IsChecked="True" />
							<CheckBox Content="Create folders / append data" IsChecked="True" />
							<CheckBox Content="Write attributes" IsChecked="True" />
							<CheckBox Content="Write extended attributes" IsChecked="True" />
							<CheckBox Content="Delete subfolders and files" IsChecked="True" />
							<CheckBox Content="Delete" IsChecked="True" />
							<CheckBox Content="Read permissions" IsChecked="True" />
							<CheckBox Content="Change permissions" IsChecked="True" />
							<CheckBox Content="Take ownership" IsChecked="True" />
						</StackPanel>
					</Grid>
				</StackPanel>

			</StackPanel>
		</ScrollViewer>
	</Grid>
</ContentDialog>
