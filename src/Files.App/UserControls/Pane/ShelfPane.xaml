<!--  Copyright (c) Files Community. Licensed under the MIT License.  -->
<UserControl
	x:Class="Files.App.UserControls.ShelfPane"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:converters="using:Files.App.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:data="using:Files.App.Data.Items"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	mc:Ignorable="d">

	<UserControl.Resources>
		<converters:ImageModelToImageConverter x:Key="ImageModelToImageConverter" />
	</UserControl.Resources>

	<Grid
		Width="240"
		AllowDrop="True"
		Background="{ThemeResource App.Theme.InfoPane.BackgroundBrush}"
		BackgroundSizing="InnerBorderEdge"
		BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
		BorderThickness="1"
		CornerRadius="8"
		DragOver="Shelf_DragOver"
		Drop="Shelf_Drop"
		RowSpacing="8">

		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<StackPanel
			Grid.Row="0"
			Padding="12"
			Spacing="8">

			<!--  Title  -->
			<TextBlock
				HorizontalAlignment="Center"
				Foreground="{ThemeResource TextFillColorSecondaryBrush}"
				Style="{StaticResource App.Theme.BodyStrongTextBlockStyle}"
				Text="{helpers:ResourceString Name=Shelf}" />

			<!--  (Divider)  -->
			<Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

			<!--  Items List  -->
			<ListView
				DragItemsStarting="ListView_DragItemsStarting"
				ItemsSource="{x:Bind ItemsSource, Mode=OneWay}"
				SelectionMode="Extended">
				<ListView.ItemTemplate>
					<DataTemplate x:DataType="data:ShelfItem">
						<StackPanel Orientation="Horizontal" Spacing="8">
							<Image Height="20" Source="{x:Bind Icon, Mode=OneWay, Converter={StaticResource ImageModelToImageConverter}}" />
							<TextBlock Text="{x:Bind Name, Mode=OneWay}" />

							<StackPanel.ContextFlyout>
								<MenuFlyout>
									<MenuFlyoutItem Command="{x:Bind RemoveCommand}" Text="{helpers:ResourceString Name=Remove}">
										<MenuFlyoutItem.Icon>
											<FontIcon Glyph="&#xE738;" />
										</MenuFlyoutItem.Icon>
									</MenuFlyoutItem>
								</MenuFlyout>
							</StackPanel.ContextFlyout>
						</StackPanel>
					</DataTemplate>
				</ListView.ItemTemplate>
			</ListView>
		</StackPanel>


		<StackPanel
			Grid.Row="1"
			Padding="12,8,12,8"
			Spacing="4">

			<!--  (Divider)  -->
			<Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

			<!--  Bottom Actions  -->
			<HyperlinkButton
				HorizontalAlignment="Center"
				VerticalAlignment="Center"
				Command="{x:Bind ClearCommand, Mode=OneWay}"
				Content="{helpers:ResourceString Name=ClearItems}" />
		</StackPanel>
	</Grid>
</UserControl>
