<!--  Copyright (c) 2023 Files Community. Licensed under the MIT License. See the LICENSE.  -->
<UserControl
	x:Class="Files.App.UserControls.Widgets.RecentFilesWidget"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
	xmlns:recent="using:Files.App.Utils.RecentItem"
	DataContext="{x:Bind ViewModel, Mode=OneWay}"
	mc:Ignorable="d">

	<StackPanel x:Name="RecentsListGrid" Orientation="Vertical">

		<!--  InfoBar When Recent Files Are Disabled In File Explorer  -->
		<muxc:InfoBar
			x:Name="RecentFilesDisabledOnWindowsWarning"
			x:Load="{x:Bind ViewModel.IsRecentFilesDisabledInWindows, Mode=OneWay}"
			IsClosable="False"
			IsIconVisible="True"
			IsOpen="True"
			Message="{helpers:ResourceString Name=RecentFilesDisabledOnWindowsWarning}"
			Severity="Warning" />

		<!--  No Recent Files  -->
		<TextBlock
			x:Name="RecentItemDescription"
			HorizontalAlignment="Stretch"
			x:Load="{x:Bind ViewModel.IsEmptyRecentFilesTextVisible, Mode=OneWay}"
			FontSize="14"
			Text="{helpers:ResourceString Name=RecentItemDescription/Text}"
			TextAlignment="Center"
			TextWrapping="WrapWholeWords" />

		<!--  Recent Files List  -->
		<ListView
			x:Name="RecentFilesListView"
			HorizontalAlignment="Stretch"
			VerticalAlignment="Stretch"
			IsItemClickEnabled="True"
			IsRightTapEnabled="True"
			ItemClick="RecentFilesListView_ItemClick"
			ItemContainerTransitions="{x:Null}"
			ItemsSource="{x:Bind ViewModel.Items, Mode=OneWay}"
			RightTapped="RecentFilesListView_RightTapped"
			SelectionMode="None">

			<ListView.ItemTemplate>
				<DataTemplate x:DataType="recent:RecentItem">
					<Grid
						Padding="2.5"
						HorizontalAlignment="Stretch"
						VerticalAlignment="Stretch"
						AutomationProperties.Name="{x:Bind Name}"
						ColumnSpacing="14"
						ToolTipService.ToolTip="{x:Bind RecentPath}">
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="Auto" />
							<ColumnDefinition Width="*" />
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>

						<!--  Item Folder Image  -->
						<FontIcon
							x:Name="RecentFolderImg"
							Grid.Column="0"
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							x:Load="{x:Bind FolderImg}"
							x:Phase="1"
							FontSize="24"
							Foreground="#ffe793"
							Glyph="&#xE8B7;" />

						<!--  Item Empty Icon  -->
						<FontIcon
							x:Name="EmptyImg"
							Grid.Column="0"
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							x:Load="{x:Bind EmptyImgVis}"
							x:Phase="1"
							FontSize="24"
							Glyph="&#xE7C3;" />

						<!--  Item Thumbnail  -->
						<Image
							x:Name="RecentFileImg"
							Grid.Column="0"
							Width="24"
							Height="24"
							HorizontalAlignment="Center"
							VerticalAlignment="Center"
							x:Load="{x:Bind FileIconVis}"
							x:Phase="1"
							Source="{x:Bind FileImg, Mode=OneWay}"
							Stretch="Uniform" />

						<!--  Item Name  -->
						<TextBlock
							Grid.Column="1"
							VerticalAlignment="Center"
							Text="{x:Bind Name}"
							TextTrimming="CharacterEllipsis"
							TextWrapping="NoWrap" />

						<!--  Item Location Path  -->
						<TextBlock
							Grid.Column="2"
							VerticalAlignment="Center"
							FontSize="12"
							Text="{x:Bind RecentPath}"
							TextTrimming="CharacterEllipsis"
							TextWrapping="NoWrap" />
					</Grid>
				</DataTemplate>
			</ListView.ItemTemplate>

			<ListView.ItemContainerStyle>
				<Style BasedOn="{StaticResource DefaultListViewItemStyle}" TargetType="ListViewItem">
					<Setter Property="MinHeight" Value="1" />
					<Setter Property="Height" Value="{ThemeResource ListItemHeight}" />
					<Setter Property="Margin" Value="{ThemeResource ListItemMargin}" />
				</Style>
			</ListView.ItemContainerStyle>

		</ListView>

	</StackPanel>
</UserControl>
