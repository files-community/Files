<!--  Copyright (c) 2023 Files Community. Licensed under the MIT License. See the LICENSE.  -->
<Page
	x:Class="Files.App.Views.Settings.AboutPage"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:helpers="using:Files.App.Helpers"
	xmlns:local="using:Files.App.UserControls.Settings"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:vm="using:Files.App.ViewModels.Settings"
	xmlns:wct="using:CommunityToolkit.WinUI.UI.Controls"
	mc:Ignorable="d">

	<Page.DataContext>
		<vm:AboutViewModel x:Name="ViewModel" />
	</Page.DataContext>

	<Grid x:Name="RootGrid">
		<StackPanel Spacing="{StaticResource SettingsCardSpacing}">
			<StackPanel.ChildrenTransitions>
				<EntranceThemeTransition FromVerticalOffset="50" />
				<RepositionThemeTransition IsStaggeringEnabled="False" />
			</StackPanel.ChildrenTransitions>

			<!--  Title  -->
			<TextBlock
				Margin="2,0,2,12"
				Style="{StaticResource SubtitleTextBlockStyle}"
				Text="{helpers:ResourceString Name=About}" />

			<!--  App Info  -->
			<local:SettingsCard Description="{x:Bind ViewModel.Version}" Header="{x:Bind ViewModel.AppName}">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xE946;" />
				</local:SettingsCard.HeaderIcon>
				<Button x:Name="CopyVersionInfo" Content="{helpers:ResourceString Name=Copy}">
					<Button.Flyout>
						<MenuFlyout>
							<MenuFlyoutItem Command="{x:Bind ViewModel.CopyAppVersionCommand}" Text="{helpers:ResourceString Name=AppVersion}" />
							<MenuFlyoutItem Command="{x:Bind ViewModel.CopyWindowsVersionCommand}" Text="{helpers:ResourceString Name=WindowsVersion}" />
						</MenuFlyout>
					</Button.Flyout>
				</Button>
			</local:SettingsCard>

			<!--  GitHub Sponsor  -->
			<local:SettingsCard
				Command="{x:Bind ViewModel.SupportUsCommand}"
				Header="{helpers:ResourceString Name=SponsorUsOnGitHub}"
				IsClickEnabled="True">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xEB51;" />
				</local:SettingsCard.HeaderIcon>
				<local:SettingsCard.ActionIcon>
					<FontIcon Glyph="&#xE8A7;" />
				</local:SettingsCard.ActionIcon>
			</local:SettingsCard>

			<!--  Help and support  -->
			<TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=HelpAndSupport}" />

			<!--  Documentation  -->
			<local:SettingsCard
				Command="{x:Bind ViewModel.OpenDocumentationCommand}"
				Header="{helpers:ResourceString Name=Documentation}"
				IsClickEnabled="True">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xE736;" />
				</local:SettingsCard.HeaderIcon>
				<local:SettingsCard.ActionIcon>
					<FontIcon Glyph="&#xE8A7;" />
				</local:SettingsCard.ActionIcon>
			</local:SettingsCard>

			<!--  Feedback  -->
			<local:SettingsExpander Header="{helpers:ResourceString Name=Feedback}">
				<local:SettingsExpander.HeaderIcon>
					<FontIcon Glyph="&#xED15;" />
				</local:SettingsExpander.HeaderIcon>
				<local:SettingsExpander.Items>
					<!--  Submit feature request  -->
					<local:SettingsCard
						Command="{x:Bind ViewModel.SubmitFeatureRequestCommand}"
						Header="{helpers:ResourceString Name=SubmitFeatureRequest}"
						IsClickEnabled="True">
						<local:SettingsCard.ActionIcon>
							<FontIcon Glyph="&#xE8A7;" />
						</local:SettingsCard.ActionIcon>
					</local:SettingsCard>
					<!--  Submit bug report  -->
					<local:SettingsCard
						Command="{x:Bind ViewModel.SubmitBugReportCommand}"
						Header="{helpers:ResourceString Name=SubmitBugReport}"
						IsClickEnabled="True">
						<local:SettingsCard.ActionIcon>
							<FontIcon Glyph="&#xE8A7;" />
						</local:SettingsCard.ActionIcon>
					</local:SettingsCard>
				</local:SettingsExpander.Items>
			</local:SettingsExpander>

			<!--  Open Log File Location  -->
			<local:SettingsCard
				Command="{x:Bind ViewModel.OpenLogLocationCommand}"
				Header="{helpers:ResourceString Name=OpenLogLocation}"
				IsClickEnabled="True">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xE838;" />
				</local:SettingsCard.HeaderIcon>
				<local:SettingsCard.ActionIcon>
					<FontIcon Glyph="&#xE8A7;" />
				</local:SettingsCard.ActionIcon>
			</local:SettingsCard>

			<!--  Open Source  -->
			<TextBlock Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" Text="{helpers:ResourceString Name=OpenSource}" />

			<!--  Third Party Licenses  -->
			<local:SettingsExpander
				x:Name="ThirdPartyLicensesSettingsExpander"
				Expanded="ThirdPartyLicensesSettingsExpander_Expanded"
				Header="{helpers:ResourceString Name=ThirdPartyLicenses}">
				<local:SettingsExpander.HeaderIcon>
					<FontIcon Glyph="&#xE15E;" />
				</local:SettingsExpander.HeaderIcon>
				<local:SettingsExpander.Items>
					<local:SettingsCard Padding="0" HorizontalAlignment="Left">
						<ScrollViewer
							Height="400"
							Padding="16"
							Background="{ThemeResource SettingsCardBackground}">
							<wct:MarkdownTextBlock
								Margin="16"
								Background="Transparent"
								LinkClicked="MarkdownTextBlock_LinkClicked"
								Text="{x:Bind ViewModel.ThirdPartyNotices, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
						</ScrollViewer>
					</local:SettingsCard>
				</local:SettingsExpander.Items>
			</local:SettingsExpander>

			<!--  Open GitHub repo  -->
			<local:SettingsCard
				Command="{x:Bind ViewModel.OpenGitHubRepoCommand}"
				Header="{helpers:ResourceString Name=OpenGitHubRepo}"
				IsClickEnabled="True">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xE12B;" />
				</local:SettingsCard.HeaderIcon>
				<local:SettingsCard.ActionIcon>
					<FontIcon Glyph="&#xE8A7;" />
				</local:SettingsCard.ActionIcon>
			</local:SettingsCard>

			<!--  Privacy  -->
			<local:SettingsCard
				Command="{x:Bind ViewModel.OpenPrivacyPolicyCommand}"
				Header="{helpers:ResourceString Name=Privacy}"
				IsClickEnabled="True">
				<local:SettingsCard.HeaderIcon>
					<FontIcon Glyph="&#xE72E;" />
				</local:SettingsCard.HeaderIcon>
				<local:SettingsCard.ActionIcon>
					<FontIcon Glyph="&#xE8A7;" />
				</local:SettingsCard.ActionIcon>
			</local:SettingsCard>

		</StackPanel>
	</Grid>
</Page>
