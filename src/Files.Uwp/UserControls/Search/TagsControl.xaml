<UserControl
    x:Class="Files.UserControls.Search.TagsControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:vm="using:Files.ViewModels.Search"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignWidth="400" d:DesignHeight="300" mc:Ignorable="d">

    <UserControl.Resources>
        <ResourceDictionary>

            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <SolidColorBrush x:Key="ParameterForeground" Color="{ThemeResource SystemAccentColorDark1}" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <SolidColorBrush x:Key="ParameterForeground" Color="{ThemeResource SystemAccentColorLight2}" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>

            <DataTemplate x:Key="TagButtonTemplate" x:DataType="vm:ISearchTagViewModel">
                <Button x:Name="MainButton" Tapped="MainButton_Tapped"
                    Margin="0,4,0,0" Padding="4" CornerRadius="4" FontSize="12"
                    PointerEntered="MainButton_PointerEntered" PointerExited="MainButton_PointerExited">
                    <Button.Content>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <TextBlock TextWrapping="Wrap" Margin="2,0,0,0">
                                <Run Text="{x:Bind Title}" />
                                <Run Text="{x:Bind Parameter}" FontWeight="Bold" Foreground="{ThemeResource ParameterForeground}" />
                            </TextBlock>
                            <Grid Grid.Column="1" Width="12" Margin="0,0,-8,0">
                                <Button x:Name="CloseButton" Visibility="Collapsed" Tapped="CloseButton_Tapped"
                                    Width="12" Padding="0" VerticalAlignment="Center" Opacity="0.60"
                                    Background="Transparent" BorderBrush="Transparent">
                                    <Button.Content>
                                        <FontIcon FontSize="10" Glyph="&#xE10A;" />
                                    </Button.Content>
                                </Button>
                            </Grid>
                        </Grid>
                    </Button.Content>
                </Button>
            </DataTemplate>

        </ResourceDictionary>
    </UserControl.Resources>

    <ItemsControl ItemsSource="{x:Bind Tags, Mode=OneWay}" ItemTemplate="{StaticResource TagButtonTemplate}">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <controls:WrapPanel HorizontalSpacing="4" VerticalSpacing="4" />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
    </ItemsControl>

</UserControl>